{% extends "navPage.html" %}
{% load static %}

{% block title %}{% if query %}{{ query }} - {% endif %}AMELA Media Search{% endblock %}

{% block content %}

	<div class="form-style" style="margin: 0;width: 700px;padding-left: 40px;padding-bottom: 40px;">
		<form action="{% url 'streaming:search' %}" method="get">
			<input class="searchfield" id="searchbox" name="Title" type="text" placeholder="Search for Movies and Shows" value="{{ query }}">
			<input type="submit" value="Search">
			<h2>
				{% for filter in filters %}
					{% if filter.name != "Title" %}
						{{ filter.name }}: <input id="{{ filter.name }}" list="{{ filter.name }}-list" autocomplete=off placeholder="{{ filter.name }}" value="{{ filter.value}}" type="text" name="{{ filter.name }}">
							<datalist id="{{ filter.name }}-list">
							{% for option in filter.defaults %}
								<option>{{ option }}</option>
							{% endfor %}
							</datalist>
					{% endif %}
				{% endfor %}
				
			</h2>
		</form>
	</div>

	{% if media %}
		<h1 id="search">
			{{ count }} result{{ count|pluralize }} found:
		</h1>
		<div class="media-style">

			{% for entry in media %}
			<figure>
				<a href="{% url 'streaming:display_media' title=entry.title %}"><img src="{% static "streaming/images/"|add:entry.thumbnail_path %}">{{ entry.title }}</a><br><br>
			</figure>
			{% endfor %}

		</div>
	{% else %}
		<h1 id="search">
			No results found for '<span style="color: #ffd700;">{{ query }}</span>'.
		</h1>
	{% endif %}

	{% if media.paginator.num_pages > 1 %}
		<div class="pagination center">
			<span class="step-links">
				&lt;
				{% for i in media.paginator.page_range %}
					{% if media.number == forloop.counter %}
						<b>{{ i }} </b>
					{% else %}
						<a href="?p={{ forloop.counter }}{% for filter in filters %}&{{ filter.name }}={{ filter.value}}{% endfor %}">{{ forloop.counter }}</a> 
					{% endif %}
				{% endfor %}
				&gt;
			</span>
		</div>
	{% endif %}
{% endblock %}
