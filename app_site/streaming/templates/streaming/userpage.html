{% extends "navPage.html" %}

{% block title %}{{ user }} - AMELA{% endblock %}
{% block content %}

{% if user != request.user %}
<div class="form-style" style="width:100%;text-align: right;">
        <form action="{% url 'streaming:user_page' username=user.username %}" method="post">
        {% csrf_token %}
            {% if not friends %}
                <input type="submit" name="follow_button" value="Follow" style="font-size: 18px;">
            {% else %}
                <input type="submit" name="follow_button" value="Unfollow" style="font-size: 18px;">
            {% endif %}
        <input type="submit" value="Message" style="font-size: 18px;margin-left: 30px;">
        </form>
    </div>
{% else %}
<br><br>
{% endif %}

<div class="profile-style" style="padding-bottom: 90px;">
    <img src="">
    <header>{{ user.first_name }} {{ user.last_name }}</header>
    <p>@{{ user }}</p>
</div>

<hr>
<p style="text-align: right;"><span>Member since</span> {{ user.date_joined }}</p>

<aside style="float: right;">
    <fieldset>
        <legend>Latest Rating</legend><br>
            <p>latest rating given...</p>
    </fieldset>
    <br><br>
    <fieldset>
    <legend>Comments</legend><br><br>
        <div class="form-style" style="margin: 0;padding-bottom: 20px;width: 63%;">
            <form action="">
                <textarea style="text-align: left; width: 150%; height: 20px;" placeholder="Leave me a comment..."></textarea>
                <input type="submit" value="Comment">
            </form>
        </div>
        {% for comment in comments %}
            <hr>
            <p><span>Posted By: </span>{{ comment.posted_by }}</p>
            <span>"{{ comment.content }}"</span><br>
        {% endfor %}
        <br>
    </fieldset>
</aside>

<section>
    <fieldset>
        <legend>Bio:</legend>
        <p>Info here...</p>
        <p>Favorite Movies</p>
        <p>Favorite TV Shows</p>
    </fieldset>
</section>

  <section>
    <fieldset>
      <legend>Watch History:</legend>

      {% for entry in history %}
          {% if entry.tv %}
              <p><span>{{ entry.time_watched }} - </span><a href="{% url 'streaming:display_episode' title=entry.tv.part_of.part_of.title season_number=entry.tv.part_of.season_number episode_number=entry.tv.episode_number %}" style="text-decoration: underline;">{{ entry.tv.part_of.part_of.title }} - Season {{ entry.tv.part_of.season_number }} Episode {{ entry.tv.episode_number }}: {{ entry.tv.title }}</a></p>
          {% endif %}
          {% if entry.movie %}
              <p><span>{{ entry.time_watched }} - </span><a href="{% url 'streaming:display_media' title=entry.movie.title %}" style="text-decoration: underline;">{{ entry.movie.title }}</a></p>
          {% endif %}

      {% endfor %}

    </fieldset>
  </section>

{% endblock %}
